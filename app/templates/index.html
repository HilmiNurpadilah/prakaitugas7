{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <div class="row mb-4">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow-lg border-0">
        <div class="card-body">
          <h2 class="mb-4 text-center text-primary">Prediksi Diabetes Sederhana</h2>
          <form method="POST" class="row g-3 justify-content-center">
            <div class="col-md-4">
              <label class="form-label">Insulin</label>
              <input type="number" step="0.01" name="Insulin" class="form-control" required>
            </div>
            <div class="col-md-4">
              <label class="form-label">Glukosa</label>
              <input type="number" step="0.01" name="Glukosa" class="form-control" required>
            </div>
            <div class="col-md-4">
              <label class="form-label">Fungsi Keturunan Diabetes</label>
              <input type="number" step="0.01" name="Fungsi_Keturunan_Diabetes" class="form-control" required>
            </div>
            <div class="col-12 text-center">
              <button type="submit" class="btn btn-success px-5">Prediksi</button>
            </div>
          </form>
          {% if prediksi %}
          <div class="alert alert-info mt-4 text-center">
            <h4 class="mb-2">Hasil Prediksi: <span class="fw-bold">{{ prediksi }}</span></h4>
            <p class="mb-1">Golongan: <span class="fw-bold">{{ golongan }}</span></p>
            <p class="mb-0">Probabilitas: <span class="fw-bold">{{ '%.2f' % probabilitas }}</span></p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow border-0">
        <div class="card-body text-center">
          <h4 class="mb-3 text-gradient fw-bold" style="font-size:1.4rem;">Visualisasi Grafik Loss Training Model</h4>
          <img src="/static/loss_plot.png" class="img-fluid rounded border shadow-sm mb-3" style="max-height:350px;object-fit:contain;background:#fff;" alt="Grafik Loss Training">
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow border-0">
        <div class="card-body">
          <h4 class="mb-3 text-center text-gradient fw-bold" style="font-size:1.4rem;">Data Setelah Preprocessing</h4>
          <p class="text-center text-muted mb-2">Berikut adalah 30 data pertama hasil preprocessing yang digunakan untuk prediksi diabetes.</p>
          <div class="table-responsive">
            {{ tabel|safe }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
body {
  min-height: 100vh;
  background: linear-gradient(120deg, #f6d365 0%, #fda085 50%, #a8edea 100%);
  background-attachment: fixed;
}
.card { border-radius: 1.2rem; box-shadow: 0 8px 32px rgba(0,0,0,0.09); }
h2, h4, h5 { letter-spacing: 0.5px; }
.table { background: #fff; }
.text-gradient {
  background: linear-gradient(90deg, #ff5858 0%, #f09819 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
</style>
{% endblock %}
